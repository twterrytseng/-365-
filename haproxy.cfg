global
  log stdout format raw local0
  maxconn 4000
  daemon

defaults
  log global
  mode tcp
  option tcplog

  timeout connect 3s
  timeout client  1m
  timeout server  1m

  retries 2

frontend k8s_api
  bind 192.168.88.228:6443
  mode tcp
  default_backend k8s_api_backend

backend k8s_api_backend
  mode tcp
  balance roundrobin

  option tcp-check

  # ✅ TCP + TLS handshake（不在這裡寫 verify）
  tcp-check connect ssl

  # ✅ server 層級關閉憑證驗證（重點）
  default-server inter 3s fall 1 rise 3 verify none

  # === Kubernetes Masters ===
  server master1 192.168.88.224:6443 check
  server master2 192.168.88.223:6443 check
  server master3 192.168.88.222:6443 check

